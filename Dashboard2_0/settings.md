| [На головну](../) | [Розділ](README.md) |
| ----------------- | ------------------- |
|                   |                     |

# Налаштування 

https://dashboard.flowfuse.com/user/settings.html#settings

Хоча більшість налаштувань інформаційної панелі виконується в редакторі Node-RED, деякі налаштування можна надати у [файлі налаштувань середовища виконання Node-RED](https://nodered.org/docs/user-guide/runtime/settings-file).

Файл `settings.js` зазвичай знаходиться в каталозі `~/.node-red`. Якщо ви не впевнені, де це, ви також можете перевірити вихід журналу Node-RED під час його запуску. Наприклад:

```
12 Sep 13:31:37 - [info] Settings file  : /Users/nol/.node-red/settings.js
```

Файл структурований як модуль JavaScript:

```js
module.exports = {
    // Lots of settings...
}
```

Node-RED Dashboard 2.0 шукає властивість під назвою `dashboard` в об’єкті налаштувань. Якщо він не знаходить його, він шукає властивість під назвою `ui` - це об'єкт налаштувань, який використовується оригінальною інформаційною панеллю Node-RED. Це спрощує міграцію між двома версіями інформаційної панелі.

Відредагуйте файл `settings.js` і додайте властивість `dashboard` всередину об’єкта `module.exports`. Це потрібно відокремити від будь-якого іншого параметра комою:

```js
dashboard: {

}
```

Потім ви можете додати спеціальні налаштування інформаційної панелі в цю властивість. Доступні параметри описано нижче. Щоразу, коли ви вносите будь-які зміни у файл `settings.js`, вам потрібно буде перезапустити Node-RED, щоб завантажити ці зміни.

#### `middleware` 

Це додає спеціальне проміжне програмне забезпечення [Express](https://expressjs.com/) перед інформаційною панеллю. Це можна використовувати для застосування спеціальної автентифікації, журналювання або будь-якого іншого типу обробки перед будь-яким запитом на інформаційну панель.

```js
dashboard: {
    middleware: (request, response, next) => {
        console.log(`New dashboard request from ${request.ip} to ${request.path}`)
        next()
    }
}
```

#### `ioMiddleware` 

Це додає спеціальне [проміжне програмне забезпечення Socket.IO](https://socket.io/docs/v4/middlewares/) перед з’єднанням websocket між сторінкою Dashboard і Node-RED.

```js
dashboard: {
    ioMiddleware: (socket, next) => {
        if (isValid(socket.request)) {
            next();
        } else {
            next(new Error("invalid"));
        }
    }
}
```

#### `maxHttpBufferSize` 

Це встановлює максимальний розмір повідомлення (у байтах), яке може надіслати сокет. Значення за замовчуванням — 1 МБ (1E6 байт).

Змініть це значення, щоб дозволити завантаження більших файлів.

```js
dashboard: {
    maxHttpBufferSize: 1e8 // size in bytes, example: 100 MB
}
```